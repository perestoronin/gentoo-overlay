--- old/src/3rdparty/chromium/net/third_party/nss/ssl/ssl3con.c	2016-03-03 15:48:36.000000000 +0100
+++ new/src/3rdparty/chromium/net/third_party/nss/ssl/ssl3con.c	2016-03-25 14:10:24.712832074 +0100
@@ -2067,8 +2067,8 @@
 	*outlen = explicitNonceLen;
     }
 
-    gcmParams.pIv = nonce;
-    gcmParams.ulIvLen = sizeof(nonce);
+    gcmParams.pNonce = nonce;
+    gcmParams.ulNonceLen = sizeof(nonce);
     gcmParams.pAAD = (unsigned char *)additionalData;  /* const cast */
     gcmParams.ulAADLen = additionalDataLen;
     gcmParams.ulTagBits = tagSize * 8;
@@ -2115,8 +2115,8 @@
     param.len = sizeof(aeadParams);
     param.data = (unsigned char *) &aeadParams;
     memset(&aeadParams, 0, sizeof(aeadParams));
-    aeadParams.pIv = (unsigned char *) additionalData;
-    aeadParams.ulIvLen = 8;
+    aeadParams.pNonce = (unsigned char *) additionalData;
+    aeadParams.ulNonceLen = 8;
     aeadParams.pAAD = (unsigned char *) additionalData;
     aeadParams.ulAADLen = additionalDataLen;
     aeadParams.ulTagLen = tagSize;
--- old/src/3rdparty/chromium/net/socket/ssl_client_socket_openssl.cc	2016-03-03 15:48:36.000000000 +0100
+++ new/src/3rdparty/chromium/net/socket/ssl_client_socket_openssl.cc	2016-03-25 14:24:55.992825646 +0100
@@ -57,6 +57,10 @@
 #include "net/ssl/ssl_platform_key.h"
 #endif
 
+#if defined(USE_NSS_CERTS) || defined(OS_IOS)
+#include "net/cert_net/nss_ocsp.h"
+#endif
+
 namespace net {
 
 namespace {
@@ -795,6 +799,14 @@
   DCHECK(!ssl_);
   DCHECK(!transport_bio_);
 
+#if defined(USE_NSS_CERTS) || defined(OS_IOS)
+  if (ssl_config_.cert_io_enabled) {
+    // TODO(davidben): Move this out of SSLClientSocket. See
+    // https://crbug.com/539520.
+    EnsureNSSHttpIOInit();
+  }
+#endif
+
   SSLContext* context = SSLContext::GetInstance();
   crypto::OpenSSLErrStackTracer err_tracer(FROM_HERE);
 
