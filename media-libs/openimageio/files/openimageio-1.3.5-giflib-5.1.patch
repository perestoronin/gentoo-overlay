--- old/src/gif.imageio/gifinput.cpp	2013-10-16 18:49:09.000000000 +0200
+++ new/src/gif.imageio/gifinput.cpp	2016-01-17 21:14:35.559761826 +0100
@@ -497,11 +497,21 @@
 GIFInput::close (void)
 {
     if (m_gif_file) {
+#if GIFLIB_MAJOR >= 5 && GIFLIB_MINOR >= 1
+		int gif_errnum = 0;
+        if (DGifCloseFile (m_gif_file, &gif_errnum) == GIF_ERROR) {
+			std::string gif_error(GifErrorString(gif_errnum));
+            error ((std::string("Error trying to close the file: ") + gif_error).c_str());
+			m_gif_file = NULL;
+            return false;
+        }
+#else
         if (DGifCloseFile (m_gif_file) == GIF_ERROR) {
             error ("Error trying to close the file.");
             return false;
         }
         m_gif_file = NULL;
+#endif
     }
     m_cached_data.clear ();
     
